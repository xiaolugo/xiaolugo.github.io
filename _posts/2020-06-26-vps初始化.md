---
title: vps初始化
layout: post
tags:
  - linux
category: it
---
# basic
```
apt update && apt upgrade -y
rm -rf /etc/localtime && ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
apt install -y htop unzip screen wget curl  vim nano net-tools  vnstat python
```
# vnstat
apt install -y vnstat
nano /etc/vnstat.conf
vnstat -u -i eth0
chown vnstat:vnstat /var/lib/vnstat/
systemctl restart vnstat
# swap.sh
wget https://www.moerats.com/usr/shell/swap.sh && bash swap.sh
# tz
mkdir app && cd app && wget --no-check-certificate -qO client-linux.py 'https://raw.githubusercontent.com/cppla/ServerStatus/master/clients/client-linux.py'

nano /lib/systemd/system/tz.service

[Unit]
Description=tz
After=multi-user.target
[Service]
Type=idle
ExecStart=/usr/bin/python /root/app/client-linux.py SERVER=tz.huxiao.co USER=ikoula PASSWORD=gudaozhi
[Install]
WantedBy=multi-user.target

systemctl start tz.service && systemctl enable tz.service
# ssh
sed -i 's/^#\?PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;
sed -i 's/^#\?PasswordAuthentication.*/PasswordAuthentication yes/g' /etc/ssh/sshd_config;
sed -i 's/#Port 22/Port 29190/' /etc/ssh/sshd_config;

service ssh restart
# besttrace
mkdir bt && cd bt && wget https://cdn.ipip.net/17mon/besttrace4linux.zip  &&unzip besttrace4linux.zip && chmod +x besttrace
./besttrace -q 1 cm.daos.win

https://huxiao.co/odb/linux/besttrace4linux.zip
# bbr
wget "https://github.com/cx9208/Linux-NetSpeed/raw/master/tcp.sh" && chmod +x tcp.sh && ./tcp.sh

echo 'net.core.default_qdisc=fq' |  tee -a /etc/sysctl.conf
echo 'net.ipv4.tcp_congestion_control=bbr' | tee -a /etc/sysctl.conf
sysctl -p
apt update && apt upgrade -y
rm -rf /etc/localtime && ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
apt install -y htop unzip screen wget curl  vim nano net-tools  vnstat python
# vnstat
apt install -y vnstat
nano /etc/vnstat.conf
vnstat -u -i eth0
chown vnstat:vnstat /var/lib/vnstat/
systemctl restart vnstat
#swap.sh
wget https://www.moerats.com/usr/shell/swap.sh && bash swap.sh
# tz
mkdir app && cd app && wget --no-check-certificate -qO client-linux.py 'https://raw.githubusercontent.com/cppla/ServerStatus/master/clients/client-linux.py'

nano /lib/systemd/system/tz.service

[Unit]
Description=tz
After=multi-user.target
[Service]
Type=idle
ExecStart=/usr/bin/python /root/app/client-linux.py SERVER=tz.huxiao.co USER=ikoula PASSWORD=gudaozhi
[Install]
WantedBy=multi-user.target

systemctl start tz.service && systemctl enable tz.service
# ssh
sed -i 's/^#\?PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config;
sed -i 's/^#\?PasswordAuthentication.*/PasswordAuthentication yes/g' /etc/ssh/sshd_config;
sed -i 's/#Port 22/Port 29190/' /etc/ssh/sshd_config;

service ssh restart
# besttrace
mkdir bt && cd bt && wget https://cdn.ipip.net/17mon/besttrace4linux.zip  &&unzip besttrace4linux.zip && chmod +x besttrace
./besttrace -q 1 cm.daos.win

https://huxiao.co/odb/linux/besttrace4linux.zip


